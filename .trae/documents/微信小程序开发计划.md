# 微信小程序开发计划

我们将把现有的宿舍管理系统扩展为支持微信小程序。这涉及后端 API 的开发和小程序前端的搭建。

## 1. 后端 API 开发 (Flask)
为了让小程序能够获取数据，我们需要在现有的 Flask 后端中添加 API 接口。

### 1.1 创建 API 蓝图
- 创建 `app/api/` 目录。
- 创建 `app/api/__init__.py` 定义 `api_bp` 蓝图。
- **注意**: API 接口将豁免 CSRF 保护，采用 Token 或简单的会话验证。

### 1.2 实现 API 端点 (`app/api/endpoints.py`)
我们将实现以下核心功能的 JSON 接口：
- **登录**: `/api/login` (验证用户名/密码，返回用户信息)
- **学生信息**: `/api/student/info` (获取当前学生信息)
- **报修管理**:
    - `GET /api/repairs` (获取报修列表)
    - `POST /api/repairs` (提交新报修)
- **水电费**: `/api/utility_bills` (获取未缴/已缴账单)
- **访客记录**: `/api/visitors` (查看访客记录)

### 1.3 注册蓝图
- 修改 `app/__init__.py`，注册新的 `api_bp`，URL 前缀设为 `/api`。

## 2. 小程序前端开发
我们将根据用户要求，新建一个文件夹 `miniprogram` 来存放小程序代码。

### 2.1 项目结构初始化
- 创建 `miniprogram/` 文件夹。
- 创建基础配置文件：
    - `app.json` (页面路由配置)
    - `project.config.json` (项目配置)
    - `app.js` (全局逻辑)
    - `app.wxss` (全局样式)

### 2.2 页面开发
我们将创建以下核心页面：
1.  **登录页 (`pages/login`)**: 用户输入学号/密码登录。
2.  **首页 (`pages/index`)**: 显示功能入口（我的宿舍、报修、水电费等）。
3.  **报修页 (`pages/repair`)**: 查看历史报修和提交新申请。
4.  **个人中心 (`pages/profile`)**: 显示学生基本信息。

## 3. 执行步骤
1.  创建后端 API 目录和文件。
2.  实现登录和数据查询 API。
3.  注册 API 蓝图。
4.  创建小程序目录 `miniprogram`。
5.  编写小程序基础代码和页面。
